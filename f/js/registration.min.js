$(function(){function e(){var e=t.basicFee;t.complexMultiLocation&&(e=$("#Registration_location_id option:selected").data("fee")||0,$("#entry-fee").text(e||"-")),1==$("#Registration_has_entourage").val()&&(e+=t.entourageFee),$(".registration-events:checked").each(function(){e+=$(this).data("fee")}),t.multiCountries&&(e=$("#Registration_location_id option:selected").data("display-fee")),e&&0!=e?a.removeClass("hide").find("#totalFee").html(e):a.addClass("hide")}var t=window.registrationOptions,a=(t.regulations,$("#fee"));$(document).on("change",".registration-agreements",function(){if(!$("#submit-button").hasClass("disabled")){var e=!0;$(".registration-agreements").each(function(){e=e&&this.checked}),$("#submit-button").prop("disabled",!e)}}).on("change",".registration-events, #Registration_location_id",function(){e()}).on("change","#Registration_has_entourage",function(){$(".entourage-info")[1==this.value?"removeClass":"addClass"]("hide"),e()}).on("change","#Registration_staff_type",function(){$(".staff-info")[this.value>0?"removeClass":"addClass"]("hide"),e()}).on("click","#submit-button",function(e){var a=$(".registration-events:checked");if(t.showRegulations){e.preventDefault();var i={};a.each(function(){var e=$(this).val();switch(e){case"333ft":case"clock":i[e]=!0;break;case"333bf":i.bf=!0;break;case"444bf":case"555bf":i.bf=!0,i.lbf=!0,i.bbf=!0;break;case"333mbf":i.bf=!0,i.lbf=!0}});var n=[];if(t.showRegulations){var s=$("<ol>");t.regulations.common.forEach(function(e){s.append($("<li>").html(e))}),$.each(t.regulations.special,function(e,t){i[e]&&s.append($("<li>").html(t))}),n.push("<h4>"+t.regulationDesc+"</h4>"),n.push($("<div>").append(s).html())}CubingChina.utils.confirm(n,{type:"type-warning"}).then(function(){$("#registration-form").submit()})}}),$(".registration-events").trigger("change"),$("#Registration_has_entourage").trigger("change"),$("#Registration_staff_type").trigger("change"),$.each(t.unmetEvents,function(e,t){$('.registration-events[value="'+e+'"]').parent().addClass("bg-danger").data("qualifyingTime",t)})});